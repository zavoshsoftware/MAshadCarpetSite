/*!
 * jQuery Magnify Plugin v1.2 by Tom Doan (http://thdoan.github.io/magnify/)
 * Based on http://thecodeplayer.com/walkthrough/magnifying-glass-for-images-using-jquery-and-css3
 *
 * jQuery Magnify by Tom Doan is licensed under the MIT License.
 * Read a copy of the license in the LICENSE file or at
 * http://choosealicense.com/licenses/mit
 */
(function(n){n.fn.magnify=function(t){var i=n.extend({speed:200},t),r=function(t){var r=n(t),f,u,o=r.parents("a"),c=r.attr("data-magnify-src")||i.src||o.attr("href")||"",s=0,h=0,e;r.css("display","block");r.parent(".magnify").length||r.wrap('<div class="magnify"><\/div>');f=r.parent(".magnify");r.prev(".magnify-lens").length||r.before('<div class="magnify-lens loading" style="background:url('+c+') no-repeat 0 0;"><\/div>');u=f.children(".magnify-lens");e=new Image;n(e).load(function(){u.removeClass("loading");s=e.width;h=e.height});e.src=c;f.mousemove(function(n){var e=f.offset(),t=n.pageX-e.left,o,c;if(nY=n.pageY-e.top,t<f.width()&&nY<f.height()&&t>0&&nY>0?u.fadeIn(i.speed):u.fadeOut(i.speed),u.is(":visible")){if(o=t-u.width()/2,c=nY-u.height()/2,s&&h)var l=Math.round(t/r.width()*s-u.width()/2)*-1,a=Math.round(nY/r.height()*h-u.height()/2)*-1,v=l+"px "+a+"px";u.css({top:c,left:o,backgroundPosition:v||""})}});!o.attr("href")||r.attr("data-magnify-src")||i.src||o.click(function(n){n.preventDefault()})};return this.each(function(){r(this)})}})(jQuery);